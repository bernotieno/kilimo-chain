<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="static/styles.css">
    <script defer src="https://unpkg.com/htmx.org@2.0.0"></script>
</head>
<body>
    <header>
        <div class="container">
            <span class="logo">AGRICULTURE</span>
            <nav class="rightSide">
                <span class="about" onclick="window.location.href='about.html'">About</span>
                <span class="product" onclick="window.location.href='products.html'">Products</span>
                <span class="part" onclick="window.location.href='collaborators.html'">Partners</span>
                <button class="sign-up" onclick="openSignUpForm()">Register</button>
            </nav>

        </div>
    </header>
    <main>
        <!-- Main content here -->
    </main>

    <div id="signup-form" class="modal">
        <div class="modal-content">
            <span class="enter" onclick="openFarmerSignUpForm()">Farmer</span>
            <span class="close" onclick="closeForms()">&times;</span>
            <h2>REGISTER</h2>
            <P>Sign up now and get full access</P>
            <form id="registration-form" hx-post="/reg" hx-trigger="submit" hx-on="htmx:afterSwap:handleSwap">
                <div class="name-container">
                    <input type="text" placeholder="Firstname" name="Firstname">
                    <input type="text" placeholder="Secondname" name="Secondname">
                </div>
                <input type="email" placeholder="Email" name="Email">
                <input type="text" placeholder="Company" name="Company">
                <input type="password" placeholder="Password" name="Password">
                <input type="password" placeholder="Confirm password" name="Confirmpassword">
                <button type="submit">SUBMIT</button>
            </form>
            <div><p class="erro"></p></div>
            <p>Already have an account? <a href="#" onclick="openSignInForm()">Sign in</a></p>
        </div>
    </div>

    <div id="farmer-signup" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeForms()">&times;</span>
            <h2>REGISTER</h2>
            <p>Register and sell all you want.</p>
            <form>
                <div class="name-container">
                    <input type="textF" placeholder="First name" name="Firstname">
                    <input type="textL" placeholder="Second name" name="Secondname">
                </div>
                <input type="email" placeholder="Email" name="email">
                <input type="text" placeholder="Company" name="Company">
                <input type="password" placeholder="Password" name="Password">
                <input type="password" placeholder="Confirm password" name="Confirmpassword">
                <button type="submit">SUBMIT</button>
            </form>
            <p>Already have an account? <a href="#" onclick="openSignInForm()">Sign in</a></p>
        </div>
    </div>

    <div id="signin-form" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeForms()">&times;</span>
            <h2>LOGIN</h2>
            <form hx-boost="true" hx-post="/login" hx-swap="innerHTML" hx-target="html">
                <input type="email" placeholder="Email" name="loginemail">
                <input type="password" placeholder="Password" name="loginpassword">
                <button type="submit">SUBMIT</button>
            </form>
            <div><p class="erros"></p></div>
            <p><a href="#">Forgot Password?</a></p>
            <p>Or Sign in using</p>
            <button class="google-button">Google</button>
        </div>
    </div>
    <script src="static/script.js"></script>
    
<script>
    function handleSwap(event) {
        const response = event.detail.xhr.responseText;
        const data = JSON.parse(response);

        if (data.target && data.html) {
            if (data.target === "html") {
                // Replace the entire document content
                document.documentElement.innerHTML = data.html;
            } else {
                // Update the specific target element
                document.querySelector(data.target).innerHTML = data.html;
            }
        }
    }

    document.getElementById('registration-form').addEventListener('htmx:afterSwap', handleSwap);
</script>

        
    
</body>
</html>